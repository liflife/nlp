<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>display</title>
</head>
<body>

    <!--
        canvas 这个标签常用来绘制图像
    -->
    <canvas id="canvas"></canvas>

</body>
display
<script>
    var address = "192.168.199.192";
    var port = 5000;
    var ws = new WebSocket("ws://"+address+":"+port+"/video");
    var canvas = document.getElementById("canvas");
    var start = document.getElementById("start");

    //设置一个定时10ms,等待WebSocket 连接完成
    var timer = setInterval(function () {
        if (ws.readyState == 1){
            //想服务器发送数据,请求图片,这里发送的内容随便都可以
            ws.send("msg");
            clearInterval(timer);
        }
    },10);
//(2).展示出来
        var ctx = canvas.getContext("2d"); // 2维图像
     canvas.setAttribute("width",640);
        canvas.setAttribute("height",480);
    //信息的回调处理函数
    ws.onmessage = function (res) {
        //(1).首先获取到一帧帧的图片
        var img_src = JSON.parse(res.data)["img"];
        var img = new Image();
        img.src = img_src;
        ctx.drawImage(img,0,0); //后面两个0代表从坐标(0,0)的位置开始绘制图片
        ws.send("msg");
    }

</script>
 <body>
    <h1>Video Streaming Demonstration</h1>
    <img src="http://192.168.199.192:5000/flash">
  </body>

</html>